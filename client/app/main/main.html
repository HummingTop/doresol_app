<div ng-include="'components/navbar/navbar.html'"></div>

<div>
    <div ng-if="!isMobile">
      <video id="intro_video" preload="auto" autoplay="true" loop="loop" muted="true">
           <source src="assets/videos/intro_video_1.mp4" type="video/mp4">
              Sorry, your browser does not support HTML5 video.
      </video>

      <div id="intro_video_control" ng-if="false">
          <span ng-show="muted" class="fa-stack fa-lg" ng-click="unmute()">
              <i class="fa fa-volume-up fa-stack-1x"></i>
              <i class="fa fa-ban fa-stack-2x"></i> 
          </span>
          <span ng-show="!muted" class="fa-stack fa-lg" ng-click="mute()">
              <i class="fa fa-volume-up fa-stack-1x"></i>
              <i class="fa fa-circle-o fa-stack-2x"></i> 
          </span>
      </div>
    </div>
    
    <div id="intro_create_overlay">
      <div class="col-sm-12" ng-if="isLoggedIn">
        <h1 class="intro_create_title">추억, 사랑, 기억</h1>
        <h2 class="intro_create_sub_title">도래솔은 진심을 다해 사랑했지만 <br/> 이젠 곁에 없는 이들을 추억하기 위한 서비스입니다.</h2>
      </div>
      <div class="col-sm-9" ng-if="waitForLogging && !isLoggedIn">
        <h1 class="intro_create_title">추억, 사랑, 기억</h1>
        <h2 class="intro_create_sub_title">도래솔은 진심을 다해 사랑했지만 <br/> 이젠 곁에 없는 이들을 추억하기 위한 서비스입니다.</h2>
      </div>
      <div class="col-sm-3" ng-if="waitForLogging && !isLoggedIn">
        <div ng-show="waitForLogging && !isLoggedIn" class="login-block">
          <div>
            <div class="well">
              <span class="btn btn-block btn-primary" ng-click="loginOauth('facebook')"><i class="fa fa-facebook"></i> 페이스북으로 로그인</span>
                <span style="color:gray;font-size:10px;">OR</span>
              <form class="form" name="loginForm" ng-submit="login(loginForm)" novalidate>
                  <input type="text" name="email" placeholder="email" class="form-control" ng-model="loginUser.email">
                  <input type="password" name="password" placeholder="password" class="form-control" ng-model="loginUser.password">
                  <button class="btn btn-info btn-block btn-login" type="submit">
                   로그인
                  </button>
                <div class="form-group has-error">
                  <p class="help-block" ng-show="loginForm.email.$error.required && loginForm.password.$error.required && loginSubmitted">
                     Please enter your email and password.
                  </p>
                  <p class="help-block">{{ loginErrors.other }}</p>
                </div>
              </form>
            </div>
            <hr>
            <!-- register -->
            <div class="well">
              <span style="color:gray;font-size:14px;">도래솔에 처음이세요?</span>
              <form class="form" name="signupForm" ng-submit="signup(signupForm)" novalidate>
                <div class="form-group" ng-class="{ 'has-success': signupForm.email.$valid && signupSubmitted,
                                                    'has-error': signupForm.email.$invalid && signupSubmitted }">
                  <input type="email" name="email" placeholder="email을 입력하세요" class="form-control" ng-model="signupUser.email"
                         required
                         firebase-error/>
                  <p class="help-block" ng-show="signupForm.email.$error.email && signupSubmitted">
                    Doesn't look like a valid email.
                  </p>
                  <p class="help-block" ng-show="signupForm.email.$error.required && signupSubmitted">
                    What's your email address?
                  </p>
                  <p class="help-block" ng-show="signupForm.email.$error.firebase">
                    {{ singupErrors.email }}
                  </p>
                </div>
                <div ng-class="{ 'has-success': signupForm.password.$valid && signupSubmitted,
                                                    'has-error': signupForm.password.$invalid && signupSubmitted }">
                  <input type="password" placeholder="password" name="password" class="form-control" ng-model="signupUser.password"
                         ng-minlength="3"
                         required
                         firebase-error/>
                  <p class="help-block"
                     ng-show="(signupForm.password.$error.minlength || signupForm.password.$error.required) && signupSubmitted">
                    Password must be at least 3 characters.
                  </p>
                  <p class="help-block" ng-show="signupForm.password.$error.mongoose">
                    {{ singupErrors.password }}
                  </p>
                </div>
                  <button class="btn btn-info btn-block btn-login" type="submit">
                    가입하기
                  </button>
              </form>
            </div>

          </div> <!-- login -->
      </div>
    </div>

</div>

<div class="container">
  <div>
   사이트 소개
  </div>
  <br/><br/>

  <div class="block-section">
    <div class="block-title">
        <h2><strong>Recent Memorials</strong></h2>
    </div>
    <div masonry item-selector=".brick-recent-memorial">
      <div masonry-brick class="brick-recent-memorial" ng-repeat="(key, memorial) in recentMemorials">
        <div class="recent-memorial-detail">
          <img ng-src="{{memorial.file.url}}" class="img-responsive" style="width:300px;height:300px"/>
          <div class="overlay text-center">
            <div class="overlay_detail">
              <div class="pull-left public">
                &nbsp;
                <button ng-if="memorial.public" class="btn btn-xs btn-default" tooltip-placement="top" tooltip="공개"><i class="fa fa-unlock"></i></button>
                <button ng-if="!memorial.public" class="btn btn-xs btn-default" tooltip-placement="top" tooltip="비공개"><i class="fa fa-lock"></i></button>
              </div>
              <br/><br/><br/><br/>
              <h3><strong>{{memorial.name}}</strong></h3>
              <div>
                <button type="button" class="btn btn-success" ui-sref="memorial.timeline({id:memorial.$id})">보기</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- temp -->
<!-- <div>
  {{browser}}<br/>
  {{width}}<br/>
  {{isMobile}}<br/>
  <br/>
</div> -->
<!-- temp end -->
